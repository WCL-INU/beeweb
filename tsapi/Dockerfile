# ------------------------------
# ğŸ“¦ Dockerfile for TypeScript API
# ------------------------------
FROM node:18

# ì•± ë””ë ‰í„°ë¦¬ ìƒì„±
WORKDIR /usr/src/app

# package.json ë³µì‚¬ ë° ì˜ì¡´ì„± ì„¤ì¹˜
COPY package*.json tsconfig.json ./
RUN npm install

# ì†ŒìŠ¤ ì½”ë“œ ë³µì‚¬
COPY . .

# TypeScript ë¹Œë“œ
RUN npm run build

# ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸ ê¶Œí•œ ì„¤ì •
RUN chmod +x wait-for-it.sh

# ì•± ì‹¤í–‰ (ì»´íŒŒì¼ëœ JavaScript ì‹¤í–‰)
CMD ["./wait-for-it.sh", "mariadb:3306", "--", "node", "dist/server.js"]
